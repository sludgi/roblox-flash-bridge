<!DOCTYPE html>
<html>
<head>
    <script src="https://unpkg.com/@ruffle-rs/ruffle"></script>
</head>
<body style="margin:0; background:#000;">
    <div id="player" style="width:100vw; height:100vh;"></div>
    <script>
        const ruffle = window.RufflePlayer.newest();
        const player = ruffle.createPlayer();
        document.getElementById("player").appendChild(player);

        // THIS IS THE MISSING LINE
        // Make sure "game.swf" matches your file name exactly!
        player.load("games/test/game.swf"); 

        setInterval(async () => {
            try {
                const res = await fetch('/flash-bridge');
                const data = await res.json();
                player.setAttributes({ flashvars: `score=${data.score}` });
            } catch(e) {}
        }, 1000);
    </script>
</body>
</html>
